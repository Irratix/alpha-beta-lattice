<!DOCTYPE html>
<canvas id="c"></canvas>
<script>
    c = document.getElementById("c");
    ctx = c.getContext("2d");
    cell_width = 64;
    c.width = cell_width * 16;
    c.height = cell_width * 16;

    const draw_centers = function() {
        ctx.fillStyle = "white";
        for (let i = 0; i < 16; i++) {
            for (let j = 0; j <16; j++) {
                ctx.beginPath();
                ctx.arc(
                    (i + 0.5) * cell_width, 
                    (j + 0.5) * cell_width, 
                    cell_width / 8,
                    0,
                    2 * Math.PI
                );
                ctx.fill();
            }
        }
    }

    const draw_arms = function(lattice) {
        ctx.strokeStyle = "white";
        ctx.strokeWidth = cell_width / 16;
        for (let i = 0; i < 16; i++) {
            for (let j = 0; j <16; j++) {
                const num = lattice[i + 16 * j];
                for (let k = 0; k < 8; k++) {
                    ctx.beginPath();
                    ctx.moveTo((i + 0.5) * cell_width, (j + 0.5) * cell_width);
                    if ((num >> k) & 1) {
                        console.log(k);
                        switch (k) {
                            case 0:
                                ctx.lineTo((i + 1) * cell_width, j * cell_width);
                                break;
                            case 1:
                                ctx.lineTo((i + 1) * cell_width, (j + 0.5) * cell_width);
                                break;
                            case 2:
                                ctx.lineTo((i + 1) * cell_width, (j + 1) * cell_width);
                                break;
                            case 3:
                                ctx.lineTo((i + 0.5) * cell_width, (j + 1) * cell_width);
                                break;
                            case 4:
                                ctx.lineTo(i * cell_width, (j + 1) * cell_width);
                                break;
                            case 5:
                                ctx.lineTo(i * cell_width, (j + 0.5) * cell_width);
                                break;
                            case 6:
                                ctx.lineTo(i * cell_width, j * cell_width);
                                break;
                            case 7:
                                ctx.lineTo((i + 0.5) * cell_width, j * cell_width);
                                break;
                        }
                    }
                    ctx.stroke();
                }
            }
        }
    }

    const draw_lattice = function(lattice) {
        console.log(lattice);
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, c.width, c.height);
        draw_centers();
        draw_arms(lattice);
    }

    draw_lattice([...Array(256).keys()]);
</script>